<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
		"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:f="http://java.sun.com/jsf/core"
	  xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:body>

	<ui:composition template="template/common/commonLayout.xhtml" >

		<ui:define name="auctionItems">


			<div class="content" align="left">
				<h:form id="registerForm" styleClass="form-group">
					<fieldset>
						<div id="legend">
							<legend class="">Sale item</legend>
						</div>
						<div class="control-group">
							<h:outputLabel class="control-label" value="Item title:" />
							<div class="controls">
								<h:inputText id="itemName" name="itemName" placeholder="" styleClass="input-xlarge" value="#{itemController.itemName}" style="width: 430px" readonly="#{itemController.readOnly}" />
								<p class="help-block">&nbsp; </p>
							</div>
						</div>
						<div class="control-group">
							<h:outputLabel class="control-label" value="Description:" />
							<div class="controls">
								<h:inputTextarea cols="58" rows="5" value="#{itemController.description}" name="description" readonly="#{itemController.readOnly}" />
								<c:choose>
									<c:when test="#{itemController.readOnly}">
										<p class="help-block">&nbsp;</p>
									</c:when>
									<c:otherwise>
										<p class="help-block">Insert a brief description </p>
									</c:otherwise>
								</c:choose>
							</div>
						</div>

						<table>
							<tr>
								<td>

									<div class="control-group">
										<h:outputLabel class="control-label" value="Category:" />
										<div class="controls">
											<c:choose>
												<c:when test="#{itemController.readOnly}">
													<h:inputText value="#{itemController.category.name}" readonly="true" />
												</c:when>
												<c:otherwise>
													<h:selectOneMenu value="#{itemController.category}" label="#{itemController.category.name}" converter="#{categoryConverterBean}" style="width: 155px" >
														<f:selectItems value="#{appGlobalController.categoriesList}" var="category" itemLabel="#{category.name}" itemValue="#{category}" />
													</h:selectOneMenu>
												</c:otherwise>
											</c:choose>
											<p class="help-block">&nbsp; </p>
										</div>
									</div>
								</td>
								<td style="width: 35px"></td>
								<td>
									<div class="control-group">
										<h:outputLabel class="control-label" value="Condition:" />
										<div class="controls">
											<c:choose>
												<c:when test="#{itemController.readOnly}">
													<h:inputText value="#{itemController.condition}" readonly="true" />
												</c:when>
												<c:otherwise>
													<h:selectOneMenu value="#{itemController.condition}" label="#{itemController.condition.label}" converter="#{conditionConverterBean}">
														<f:selectItems value="#{itemController.conditionValues}" var="condition" itemLabel="#{condition.label}" itemValue="#{condition}" />
													</h:selectOneMenu>
												</c:otherwise>
											</c:choose>
											<p class="help-block">&nbsp; </p>
										</div>
									</div>
								</td>
							</tr>
							<tr>
								<td>
									<div class="control-group">
										<c:choose>
											<c:when test="#{itemController.displayPostNewItemButton}">
												<h:outputLabel class="control-label" value="Starting price ($):" />
												<div class="controls">
													<h:inputText id="startingPrice" name="startingPrice" placeholder="" styleClass="input-xlarge" value="#{itemController.startingPrice}" readonly="#{itemController.readOnly}" />
													<p class="help-block">Insert the lowest price you will accept </p>
												</div>
											</c:when>>
											<c:otherwise>
												<h:outputLabel class="control-label" value="Current BID ($):" />
												<div class="controls">
													<h:inputText id="bidPrice" name="bidPrice" placeholder="" styleClass="input-xlarge" value="#{itemController.currentBid}" readonly="#{itemController.readOnly}" />
													<p class="help-block">&nbsp;</p>
												</div>
											</c:otherwise>
										</c:choose>
									</div>
								</td>
								<td style="width: 35px"></td>
								<td>
									<div class="control-group">
										<h:outputLabel class="control-label" value="Auction ends in (Days):" />
										<div class="controls">
											<h:inputText id="daysTillEnd" name="daysTillEnd" placeholder="" styleClass="input-xlarge" value="#{itemController.daysTillEnd}" readonly="#{itemController.readOnly}" />
											<c:choose>
												<c:when test="#{itemController.readOnly}">
													<p class="help-block">&nbsp;</p>
												</c:when>
												<c:otherwise>
													<p class="help-block">Insert the number of days till auction end </p>
												</c:otherwise>
											</c:choose>
										</div>
									</div>
								</td>
							</tr>
						</table>


						<br/> <br/>
						<div class="control-group">
							<c:choose>
								<c:when test="#{itemController.displayPostNewItemButton}">
									<div class="controls"> <h:commandButton value="Post for Sale" action="#{itemController.postNewItem}" class="btn btn-info btn-lg"/> </div>
								</c:when>
								<c:otherwise>
									<c:choose>
										<c:when test="#{itemController.loggedIn}">
											<div class="controls">
												<button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#bidModal">Bid Now!!</button>
											</div>
										</c:when>
										<c:otherwise>
											<div class="controls"> <h:commandButton value="Login to BID" action="login" styleClass="btn btn-info btn-lg"/> </div>
										</c:otherwise>
									</c:choose>
								</c:otherwise>
							</c:choose>
						</div>
					</fieldset>
				</h:form>

				<div id="bidModal" class="modal fade" role="dialog">
					<div class="modal-dialog">
						<h:form id="bidForm" styleClass="form-group">
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal">&times;</button>
									<h4 class="modal-title">BID on:  #{itemController.itemName}</h4>
								</div>
								<div class="modal-body">
									<div class="row" style="padding-left: 20px;">
									<table>
										<tr>
											<td><h2>Current bid:</h2></td>
											<td width="50px">&nbsp;</td>
											<td><h2>#{itemController.currentBid}&nbsp;$</h2></td>
										</tr>
										<tr>
											<td><h2>Place your bid:</h2></td>
											<td>&nbsp;</td>
											<td><h2><h:inputText id="bidSum" value="#{itemController.bidSum}" validatorId="validators.BidValidator" style="width: 100px" /></h2></td>
										</tr>
									</table>
									</div>
								</div>
								<div class="modal-footer">
									<h:commandLink action="#{itemController.placeBid}" styleClass="clickAll">
										<h:graphicImage library="images" name="bid-now.jpg" data-dismiss="modal" />
									</h:commandLink>
								</div>
							</div>
						</h:form>
					</div>
				</div>


			</div>


		</ui:define>

	</ui:composition>

</h:body>


</html>